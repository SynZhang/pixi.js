<!DOCTYPE HTML>
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Filters</title>
    <style>
      body {
        margin: 0;
        padding: 0;
        background-color: #fff;
      }
    </style>

    <script src="dat.gui.min.js"></script>
    <script src="../../bin/pixi.js"></script>
  </head>
  <body>
    <script>
      var renderer = new PIXI.WebGLRenderer(640, 640);

      renderer.view.style.position = "absolute";
      renderer.view.style.width = window.innerHeight + "px";
      renderer.view.style.height = window.innerHeight + "px";
      renderer.view.style.display = "block";

      document.body.appendChild(renderer.view);

      var filtersSwitchs = [false, false];
      var gui = new dat.GUI({
        // height: 5 * 32 - 1,
        // width: 350
      });

      // Amaro Filter

      var amaroFilter = new PIXI.filters.AmaroFilter(PIXI.Texture.fromImage("filter.png"));
      var amaroFolder = gui.addFolder('Amaro');

      amaroFolder.add(filtersSwitchs, '0').name("apply");

      // Amaro Filter

      var hudsonFilter = new PIXI.filters.HudsonFilter(PIXI.Texture.fromImage("hudson.png"));
      var hudsonFolder = gui.addFolder('Hudson');

      hudsonFolder.add(filtersSwitchs, '1').name("apply");

      var filterCollection = [amaroFilter, hudsonFilter];
      var container = new PIXI.Container();

      var image = PIXI.Sprite.fromImage("image.jpg");
      container.addChild(image);

      var switchy = false;

      requestAnimationFrame(animate);

      function animate() {
        var filtersToApply = [];

        for (var i = 0; i < filterCollection.length; i++) {
          if(filtersSwitchs[i])filtersToApply.push(filterCollection[i]);
        };

        container.filters = filtersToApply.length > 0 ? filtersToApply : null;

        renderer.render(container);
        requestAnimationFrame(animate);
      }
    </script>
  </body>
</html>
